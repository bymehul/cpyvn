---
import fs from "node:fs";
import path from "node:path";
import { marked } from "marked";
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const repoRoot = path.resolve(process.cwd(), "..");
const filePath = path.join(repoRoot, "CONTRIBUTING.md");
const content = fs.readFileSync(filePath, "utf-8");
const titleLine = content.split("\n").find((line) => line.startsWith("# "));
const title = titleLine ? titleLine.replace("# ", "").trim() : "Contributing";
const html = marked.parse(content);
---

<BaseLayout title={`cpyvn Â· ${title}`}>
  <Header current="/docs" />
  <main>
    <section class="section">
      <div class="container">
        <div class="card">
          <div class="eyebrow">Contributing</div>
          <h1>{title}</h1>
          <div class="markdown" set:html={html}></div>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
